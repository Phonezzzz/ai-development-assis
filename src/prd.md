# PRD: Рабочее пространство ИИ агентов на русском языке с TTS и векторным поиском

## Основная цель и успех

**Заявление о миссии**: Создать интуитивную русскоязычную среду разработки с системой ИИ агентов, которая поддерживает голосовое взаимодействие, синтез речи, векторный поиск и реальные инструменты для работы с кодом и файлами.

**Показатели успеха**: 
- Беспрепятственное взаимодействие на русском языке
- Четкое разделение между режимами планирования и выполнения
- Интеграция с OpenRouter API для реальных моделей ИИ
- Функциональный TTS через ElevenLabs с fallback на браузерный TTS
- Векторный поиск с использованием Qdrant и OpenAI эмбеддингов
- Реальные инструменты агентов без заглушек
- Интуитивный выбор моделей ИИ

**Качества опыта**: Профессиональный, интуитивный, эффективный, современный

## Классификация проекта и подход

**Уровень сложности**: Комплексное приложение (продвинутая функциональность, интеграция с внешними сервисами)
**Основная активность пользователя**: Взаимодействие (планирование и выполнение задач с ИИ агентами, анализ файлов, поиск)

## Основные проблемы

**Анализ основной проблемы**: Пользователям нужен комплексный инструмент для работы с ИИ агентами, который включает голосовое взаимодействие, анализ файлов, генерацию кода и семантический поиск.

**Контекст пользователя**: Разработчики и технические специалисты, которые предпочитают русский интерфейс и хотят использовать различные модели ИИ с реальными инструментами.

**Критический путь**: Ввод задачи → Выбор режима (План/Выполнить/Спросить) → Взаимодействие с агентами или прямой ответ ИИ → Использование инструментов → Получение результата

**Ключевые моменты**: 
1. Выбор модели ИИ из списка OpenRouter
2. Настройка TTS (ElevenLabs API)
3. Принятие решения между планированием, выполнением и прямым вопросом
4. Подтверждение плана перед выполнением в режиме "План"
5. Прямые ответы ИИ в режиме "Спросить"
6. Использование реальных инструментов агентов

## Основные функции

### Русскоязычный интерфейс
- **Что это делает**: Полный перевод всех элементов интерфейса на русский язык, включая новые функции TTS и векторного поиска
- **Почему это важно**: Обеспечивает комфортную работу для русскоязычных пользователей
- **Критерии успеха**: Все тексты переведены и понятны

### TTS интеграция с ElevenLabs
- **Что это делает**: Синтез речи через ElevenLabs API с настраиваемыми параметрами
- **Почему это важно**: Обеспечивает высококачественный русский синтез речи
- **Критерии успеха**: Четкая речь, настройка голоса, fallback на браузерный TTS

### Векторный поиск и умный контекст
- **Что это делает**: Семантический поиск по истории сообщений, файлам, планам и коду с использованием OpenAI эмбеддингов и Qdrant
- **Почему это важно**: Позволяет находить релевантную информацию и предоставлять контекстуальные предложения
- **Критерии успеха**: Быстрый поиск, релевантные результаты, контекстуальные предложения

### Умная панель контекста
- **Что это делает**: Автоматически отображает релевантный контекст на основе текущего запроса
- **Почему это важно**: Помогает агентам принимать более обоснованные решения с учетом истории
- **Критерии успеха**: Показывает релевантные документы, ключевые темы и предлагаемые вопросы

### Интеграция с локальной и облачной векторной БД
- **Что это делает**: Поддержка как Qdrant (облачное/локальное), так и локального векторного поиска для демо
- **Почему это важно**: Гибкость в выборе хранения данных
- **Критерии успеха**: Работает с Qdrant при наличии конфигурации, fallback на локальный поиск

### Автоматическое добавление в контекст
- **Что это делает**: Автоматически индексирует сообщения, файлы, планы и код в векторной БД
- **Почему это важно**: Создает базу знаний без ручного вмешательства
- **Критерии успеха**: Все взаимодействия сохраняются и индексируются
- **Что это делает**: Под каждым ответом агента кнопки копирования и TTS воспроизведения
- **Почему это важно**: Удобство работы с результатами агентов
- **Критерии успеха**: Мгновенное копирование, качественное воспроизведение

### Векторная база данных Qdrant
- **Что это делает**: Автоматическое индексирование сообщений и файлов в Qdrant
- **Почему это важно**: Обеспечивает семантический поиск по истории
- **Критерии успеха**: Быстрый поиск, релевантные результаты

### Эмбеддинги OpenAI
- **Что это делает**: Создание векторных представлений текста через OpenAI API
- **Почему это важно**: Высокое качество семантического поиска
- **Критерии успеха**: Точные эмбеддинги, быстрая обработка

### Реальные инструменты агентов
- **Что это делает**: Полнофункциональные инструменты без заглушек:
  - Анализ файлов (код, текст, изображения)
  - Генерация кода
  - Семантический поиск
  - Создание карты проекта
- **Почему это важно**: Практическая польза от агентов
- **Критерии успеха**: Все инструменты работают корректно
- **Что это делает**: .env.example файл с настройками API
- **Почему это важно**: Упрощает настройку для пользователей
- **Критерии успеха**: Четкие инструкции по настройке, безопасное хранение ключей

### Выбор модели OpenRouter
- **Что это делает**: Продвинутый селектор с информацией о моделях (цены, провайдеры, лимиты)
- **Почему это важно**: Позволяет осознанно выбирать подходящую модель
- **Критерии успеха**: Отображение актуальной информации, группировка по провайдерам

### Система подтверждения планов
- **Что это делает**: В режиме планирования агент спрашивает подтверждение перед выполнением
- **Почему это важно**: Дает пользователю контроль над процессом
- **Критерии успеха**: Ответы "да"/"нет" корректно обрабатываются

### Режим прямых вопросов "Спросить"
- **Что это делает**: Прямое взаимодействие с ИИ без системы агентов для простых вопросов
- **Почему это важно**: Быстрые ответы на простые вопросы без создания планов
- **Критерии успеха**: Мгновенные ответы ИИ, поддержка голосового ввода и TTS

## Направление дизайна

### Визуальный тон и идентичность
- **Эмоциональная реакция**: Профессиональный, надежный, современный
- **Личность дизайна**: Серьезный и элегантный (в стиле Perplexity)
- **Визуальные метафоры**: Темная тема с фиолетовыми акцентами
- **Спектр простоты**: Минимальный интерфейс с четкой функциональностью

### Цветовая стратегия
- **Тип цветовой схемы**: Монохроматическая с акцентами
- **Основной цвет**: Темно-фиолетовый (oklch(0.45 0.15 285))
- **Дополнительные цвета**: Темно-серые оттенки
- **Акцентный цвет**: Яркий фиолетовый (oklch(0.65 0.25 285))
- **Психология цвета**: Фиолетовый передает инновацию и технологичность
- **Доступность цвета**: Соответствие WCAG AA для контрастности

### Типографическая система
- **Стратегия сочетания шрифтов**: Inter для интерфейса, JetBrains Mono для кода
- **Иерархия**: Четкое разделение заголовков, основного текста и подписей
- **Личность шрифта**: Современная, читаемая, техническая
- **Фокус на читаемости**: Оптимальная высота строк и размеры
- **Какие шрифты**: Inter (веса 400, 500, 600, 700), JetBrains Mono (400, 500)

### Компоненты UI и выбор компонентов
- **Использование компонентов**: shadcn/ui для всех интерактивных элементов
- **Состояния компонентов**: Четкие состояния для кнопок, инпутов, селектов
- **Иерархия компонентов**: Первичные, вторичные кнопки с правильным использованием
- **Выбор иконок**: Phosphor Icons для единообразия
- **Адаптация для мобильных**: Responsive дизайн для всех компонентов

### Визуальная иерархия и макет
- **Направление внимания**: Фокус на области ввода и кнопках действий
- **Философия белого пространства**: Щедрые отступы для комфортного чтения
- **Система сетки**: Flexbox/Grid для адаптивности
- **Плотность контента**: Сбалансированная информационная насыщенность

## Вопросы доступности и читаемости
- **Цель контрастности**: Соответствие WCAG AA как минимум
- **Все пары цветов**: Белый текст на темных фонах с достаточным контрастом

## Крайние случаи и проблемные сценарии
- **Потенциальные препятствия**: Проблемы с подключением к OpenRouter API
- **Обработка крайних случаев**: Graceful fallback при недоступности API
- **Технические ограничения**: Зависимость от внешнего API

## Соображения по реализации
- **Потребности масштабируемости**: Модульная архитектура для добавления новых моделей
- **Фокус тестирования**: Тестирование переключения режимов и обработки ответов
- **Критические вопросы**: Безопасное хранение API ключей

## Размышления
- **Уникальность подхода**: Комбинация русскоязычного интерфейса с современной архитектурой агентов
- **Предположения для проверки**: Пользователи предпочитают четкое разделение планирования и выполнения
- **Исключительное решение**: Интуитивный workflow с голосовой поддержкой и выбором моделей